<!DOCTYPE html>
<html>
<head>
	<title><%=tittle %></title>
	<link rel="stylesheet" type="text/css" href="slide navbar style.css">
<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
</head>
<!-- add css  file-->
<link rel="stylesheet" href="components/Login/style.css">
<body>
	<div class="top"></div>
	<section class="admin-login">
		<div>Admin Login</div>
		<a href="/auth/admin-login">Click here</a>
	</section>
	<div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">

			<div class="signup">
				<form  id="signup-form">
					<label for="chk" aria-hidden="true">Sign up</label>
					<!-- <input type="text" name="txt" placeholder="User name" required=""> -->
					<input type="email" name="email" placeholder="Email" required="">
					<input type="password" name="pswd" placeholder="Password" required="">
					<button type="submit">Sign up</button>
				</form>
			</div>

			<div class="login">
				<form action="/auth/login" method="post" id="login-form" >
					<label for="chk" aria-hidden="true">Login</label>
					<input type="email" name="email" placeholder="Email" required="">
					<input type="password" name="pswd" placeholder="Password" required="">
					<button type="submit">Login</button>
				</form>
			</div>
			
	</div>
	<div class="bottom"></div>
</body>
<script>
	const form1 = document.forms['signup-form'];
	form1.addEventListener('submit', event => {
		event.preventDefault();
		const formData = new FormData(form1);
		const data = Object.fromEntries(formData);
		// console.log(data);

		fetch('/auth/signup', {
			method: 'POST',
			body: JSON.stringify(data),
			headers: {
				'Content-Type': 'application/json'
			}
		})
		.then( ({status})=> {
			status===200?alert('SignUp Successful,Please login now '):status===401?alert('Error: User already existed'):status===401?alert('Some unknown error occured'):alert('Some unknown error occured')
		})
	
		.catch (err => alert('some error occured'))
	})
	const form2 = document.forms['login-form'];
	// form2.addEventListener('submit', event => {
	// 	event.preventDefault();
	// 	const formData2 = new FormData(form2);
	// 	const data2 = Object.fromEntries(formData2);
	// 	// console.log(data);

	// 	fetch('/auth/signup', {
	// 		method: 'POST',
	// 		body: JSON.stringify(data2),
	// 		headers: {
	// 			'Content-Type': 'application/json'
	// 		}
	// 	})
	// 	.then( ({status})=> {
	// 		console.log(`this is isndie then of login page`)
	// 		status===200?window.open('/'):alert('Some unknown error occured')
	// 	})
	
	// .catch (err => {console.log('this is sindide cATCH}'); alert('some error occured')})
	// })
</script>
</html>